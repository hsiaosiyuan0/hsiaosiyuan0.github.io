<!DOCTYPE html>
<html lang="en-us">
  <head>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>字符集与字符编码 | hsiaosiyuan</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="http://hsiaosiyuan0.github.io/css/theme-override.css">
    <header>

  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="http://hsiaosiyuan0.github.io/">~/hsiaosiyuan</a>
      </li>
      

      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">字符集与字符编码</span></h1>

<h2 class="date">2019/06/17</h2>
<p class="terms">
  
  
  
  
  
</p>
</div>


<div class="content-wrapper">
  <main>
    <p>之前已经了解过一些 Unicode 和 UTF-8 之前的关系，见 <a href="UTF-8%20%E7%BC%96%E7%A0%81%E5%8F%8A%E6%A3%80%E6%9F%A5%E5%85%B6%E5%AE%8C%E6%95%B4%E6%80%A7.md">UTF-8 编码及检查其完整性.md</a>。</p>
<p>今天在看 <a href="http://site.icu-project.org/">ICU</a> 文档的时候，又再一次看到 <code>codepage</code> 这个参数，比如 <a href="http://icu-project.org/apiref/icu4c/ustdio_8h.html#a921519fbcb17c3e3c020b2871afb8b23">u_fopen</a>，于是想了解一下 code page 和 character set、character encoding 之间的关系。</p>
<p>代码页「Code Page」，也被称为 字符编码「Character Encoding」。维基百科上还解释称代码页也被称为内码，<a href="https://zh.wikipedia.org/wiki/%E4%BB%A3%E7%A0%81%E9%A1%B5">见</a>，初一看确认让人感觉云里雾里的，不排除中文翻译的问题。内码表示的是操作系统或者应用程序内部使用的编码，简称为「内码」。相信有人会和我一样，最初会以为代码页只的是很多编码格式的集合，单其实不是，一个代码页对应一个字符编码格式。</p>
<p>字符集「Character Set」，这里的集合「Set」表示的是字符与指代它们的数字之间的对应关系的集合，比如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">a_character_set</span> <span style="color:#f92672">=</span> {
  <span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
  <span style="color:#e6db74">&#39;b&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>
}
</code></pre></div><p>那么字符集与字符编码有什么不同吗？区别就在于，编码引入了转换处理的过程。我们拿 Unicode 和 UTF-8 来举例。Unicode 就是字符集，我们通常可以使用 UInt32 来表示一个字符对应的 Unicode 中的数字，就好比上面的例子。而 UTF-8 被称为字符编码的原因，就是因为它包含了将原本需要 UInt32 即 4 个字节表示的字符，处理成需要 1~4 个不等的字符来表示的形式，这其中的转换就是编码的工作含义。我们甚至可以将 Character Set 理解为最简单的 Character Encoding。</p>
<p>如果我们打开浏览器控制台检查「Inspect」一个请求的话，会发现在 Response Headers 中有：</p>
<pre><code>Content-Type: text/html; charset=UTF-8
</code></pre><p>我们发现 UTF-8 是作为 <code>charset</code> 的值，为什么这里不是 <code>char-encoding</code> 呢？这是因为 HTTP 标准制定诞生在 Unicode 标准之前，那时都是使用 Character Set 的形式，而在 Unicode 系列标准出现后，为了保证兼容性 HTTP 标准保留了 <code>charset</code> 的使用。</p>
<p>参考:</p>
<ul>
<li><a href="http://www.grauw.nl/blog/entry/254">Character set vs. character encoding</a></li>
<li><a href="https://www.ibm.com/developerworks/library/ws-codepages/ws-codepages-pdf.pdf">A brief introduction to code pages and Unicode</a></li>
</ul>

    <a href="/"> >> Home</a>
  </main>
</div>
    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
      <hr/>
      <a href="https://github.com/hsiaosiyuan0">GitHub</a>
      
    </footer>
  </body>
</html>

